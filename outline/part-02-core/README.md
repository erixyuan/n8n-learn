# 第二部分：核心功能深入 (8-10集)

本部分深入介绍n8n的核心功能和高级特性，帮助学习者掌握复杂工作流的设计和实现。

## 学习目标

- 掌握各种核心节点的使用方法
- 学会复杂的数据处理和转换
- 理解表达式和函数的应用
- 具备错误处理和调试能力
- 掌握大数据量处理技巧

## 内容概览

| 集数 | 标题 | 时长 | 难度 | 关键技能 |
|------|------|------|------|----------|
| 第5集 | [数据处理节点](episode-05.md) | 26分钟 | 初级-中级 | 数据操作、条件判断 |
| 第6集 | [常用应用集成](episode-06.md) | 28分钟 | 初级-中级 | API调用、第三方集成 |
| 第7集 | [表达式与函数](episode-07.md) | 25分钟 | 中级 | 表达式编写、函数应用 |
| 第8集 | [错误处理与调试](episode-08.md) | 23分钟 | 中级 | 错误处理、调试技巧 |
| 第9集 | [循环与批处理](episode-09.md) | 27分钟 | 中级-高级 | 大数据处理、性能优化 |
| 第10集 | [子工作流与模块化](episode-10.md) | 24分钟 | 中级-高级 | 模块化设计、复用 |

## 先修知识

- 完成第一部分的学习
- 熟悉基本的JSON数据格式
- 了解HTTP请求的基本概念
- 具备基本的逻辑思维能力

## 重点技能

### 数据处理技能
- Set节点的高级用法
- JavaScript代码编写
- 条件分支逻辑设计
- 数据格式转换

### 集成能力
- RESTful API调用
- OAuth身份验证
- 数据库连接操作
- 文件系统操作

### 表达式编程
- n8n表达式语法
- 内置函数使用
- 复杂数据操作
- 动态内容生成

## 实践项目

完成本部分学习后，建议尝试以下项目：

### 项目1：智能数据同步系统
- 多数据源集成（API、数据库、文件）
- 数据清洗和标准化
- 智能重复数据处理
- 异常数据告警

### 项目2：自动化报告生成
- 定时从多个系统获取数据
- 数据汇总和分析计算
- 图表生成和邮件发送
- 错误处理和恢复机制

### 项目3：复杂业务流程自动化
- 多条件分支处理
- 子流程模块化设计
- 大批量数据处理
- 完整的错误处理体系

## 学习建议

1. **理论与实践结合**：每个概念都要通过实际操作加深理解
2. **循序渐进**：从简单示例开始，逐步增加复杂度
3. **多做练习**：表达式和函数需要大量练习才能熟练掌握
4. **注重调试**：学会使用调试工具排查问题
5. **模块化思维**：培养工作流的模块化设计习惯

## 关键概念

### 数据流概念
```
Input → Transform → Process → Output
  ↓        ↓          ↓        ↓
节点      函数       逻辑     结果
```

### 错误处理模式
```
Normal Flow → Error → Error Handler → Recovery/Notification
```

### 批处理模式
```
Large Dataset → Split → Process Batch → Merge → Result
```

## 常见问题

**Q: 表达式编写有什么技巧？**
A: 建议先在简单场景下练习，熟悉语法后再处理复杂逻辑。多使用内置函数可以简化代码。

**Q: 如何处理大量数据？**
A: 使用SplitInBatches节点分批处理，合理设置批次大小，注意内存使用情况。

**Q: 工作流执行很慢怎么办？**
A: 检查是否有不必要的网络请求，优化数据处理逻辑，考虑使用并行处理。

**Q: 如何设计可复用的工作流？**
A: 使用子工作流功能，参数化关键配置，遵循单一职责原则。

## 性能优化要点

1. **减少不必要的节点**：简化工作流逻辑
2. **优化数据传递**：只传递必要的数据
3. **合理使用缓存**：避免重复计算和请求
4. **并行处理**：适当使用并行节点
5. **资源限制**：设置合理的超时和重试

## 延伸学习

- [n8n节点文档](https://docs.n8n.io/nodes/)
- [JavaScript基础教程](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript)
- [RESTful API设计原则](https://restfulapi.net/)
- [JSON数据处理最佳实践](https://www.json.org/)

---

**提示**: 本部分内容较为密集，建议分阶段学习，每完成2-3集就做一次综合练习。